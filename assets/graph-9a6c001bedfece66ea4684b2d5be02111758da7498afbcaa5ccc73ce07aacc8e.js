-- - -- -$(document).ready(function(){function e(e){var a,t=[],s=[];s=[{key:"O-",values:[{x:new Date("2016-03-16"),y:parseFloat("5.3")},{x:new Date("2016-03-17"),y:parseFloat("5.3")},{x:new Date("2016-03-18"),y:parseFloat("5.1")},{x:new Date("2016-03-19"),y:parseFloat("5.1")},{x:new Date("2016-03-20"),y:parseFloat("5.1")},{x:new Date("2016-03-21"),y:parseFloat("4.4")},{x:new Date("2016-03-21"),y:parseFloat("4.4")},{x:new Date("2016-03-22"),y:parseFloat("4.2")},{x:new Date("2016-03-23"),y:parseFloat("4.9")}]},{key:"A-",values:[{x:new Date("2016-03-16"),y:parseFloat("7.8")},{x:new Date("2016-03-17"),y:parseFloat("8.2")},{x:new Date("2016-03-18"),y:parseFloat("8")},{x:new Date("2016-03-19"),y:parseFloat("8")},{x:new Date("2016-03-20"),y:parseFloat("8")},{x:new Date("2016-03-21"),y:parseFloat("7.8")},{x:new Date("2016-03-21"),y:parseFloat("7.8")},{x:new Date("2016-03-22"),y:parseFloat("7.5")},{x:new Date("2016-03-23"),y:parseFloat("7.5")}]},{key:"B-",values:[{x:new Date("2016-03-16"),y:parseFloat("6.3")},{x:new Date("2016-03-17"),y:parseFloat("6.6")},{x:new Date("2016-03-18"),y:parseFloat("7.1")},{x:new Date("2016-03-19"),y:parseFloat("7.1")},{x:new Date("2016-03-20"),y:parseFloat("7.1")},{x:new Date("2016-03-21"),y:parseFloat("7")},{x:new Date("2016-03-21"),y:parseFloat("7")},{x:new Date("2016-03-22"),y:parseFloat("6.9")},{x:new Date("2016-03-23"),y:parseFloat("7.7")}]},{key:"AB-",values:[{x:new Date("2016-03-16"),y:parseFloat("8.8")},{x:new Date("2016-03-17"),y:parseFloat("9.6")},{x:new Date("2016-03-18"),y:parseFloat("10.0")},{x:new Date("2016-03-19"),y:parseFloat("10.0")},{x:new Date("2016-03-20"),y:parseFloat("10.0")},{x:new Date("2016-03-21"),y:parseFloat("8.3")},{x:new Date("2016-03-21"),y:parseFloat("8.3")},{x:new Date("2016-03-22"),y:parseFloat("8.6")},{x:new Date("2016-03-23"),y:parseFloat("9.5")}]},{key:"O+",values:[{x:new Date("2016-03-16"),y:parseFloat("7.5")},{x:new Date("2016-03-17"),y:parseFloat("7.5")},{x:new Date("2016-03-18"),y:parseFloat("7.1")},{x:new Date("2016-03-19"),y:parseFloat("7.1")},{x:new Date("2016-03-20"),y:parseFloat("7.1")},{x:new Date("2016-03-21"),y:parseFloat("6.4")},{x:new Date("2016-03-21"),y:parseFloat("6.4")},{x:new Date("2016-03-22"),y:parseFloat("6.3")},{x:new Date("2016-03-23"),y:parseFloat("6.5")}]},{key:"A+",values:[{x:new Date("2016-03-16"),y:parseFloat("8.4")},{x:new Date("2016-03-17"),y:parseFloat("8.0")},{x:new Date("2016-03-18"),y:parseFloat("7.6")},{x:new Date("2016-03-19"),y:parseFloat("7.6")},{x:new Date("2016-03-20"),y:parseFloat("7.6")},{x:new Date("2016-03-21"),y:parseFloat("7.3")},{x:new Date("2016-03-21"),y:parseFloat("7.3")},{x:new Date("2016-03-22"),y:parseFloat("7.2")},{x:new Date("2016-03-23"),y:parseFloat("7.5")}]},{key:"B+",values:[{x:new Date("2016-03-16"),y:parseFloat("11.7")},{x:new Date("2016-03-17"),y:parseFloat("11.7")},{x:new Date("2016-03-18"),y:parseFloat("11.8")},{x:new Date("2016-03-19"),y:parseFloat("11.8")},{x:new Date("2016-03-20"),y:parseFloat("11.8")},{x:new Date("2016-03-21"),y:parseFloat("11.2")},{x:new Date("2016-03-21"),y:parseFloat("11.2")},{x:new Date("2016-03-22"),y:parseFloat("10.6")},{x:new Date("2016-03-23"),y:parseFloat("9.7")}]},{key:"AB+",values:[{x:new Date("2016-03-16"),y:parseFloat("15.9")},{x:new Date("2016-03-17"),y:parseFloat("15.6")},{x:new Date("2016-03-18"),y:parseFloat("15.5")},{x:new Date("2016-03-19"),y:parseFloat("15.5")},{x:new Date("2016-03-20"),y:parseFloat("15.5")},{x:new Date("2016-03-21"),y:parseFloat("15.1")},{x:new Date("2016-03-21"),y:parseFloat("15.1")},{x:new Date("2016-03-22"),y:parseFloat("14.5")},{x:new Date("2016-03-23"),y:parseFloat("15.7")}]}],console.log(s);var n=["O-","A-","B-","AB-","O+","A+","B+","AB+"];for(a=0;a<n.length;++a)t.push({values:[],key:n[a]});for(t.push({values:[],key:"Target",classed:"dashed",color:"#000000",strokeWidth:4}),a=0;a<e.length;++a){var l=e[a],o=n.indexOf(l.type);-1!=o&&(t[o].values.push({x:new Date(l.date),y:parseFloat(l.days_remaining)}),t[t.length-1].values.push({x:new Date(l.date),y:6}))}return s}$.get("/scotblood-levels/_data/blood_stats.csv",function(a){var t=$.csv.toObjects(a);nv.addGraph(function(){var a=nv.models.lineChart().margin({left:100,right:50}).useInteractiveGuideline(!0).showLegend(!0).showYAxis(!0).showXAxis(!0);a.xAxis.axisLabel("Date").tickFormat(function(e){return d3.time.format("%Y-%m-%d")(new Date(e))}),a.yAxis.axisLabel("Days Remaining").tickFormat(d3.format(".1f"));var s=e(t);return d3.select("#chart svg").datum(s).call(a),nv.utils.windowResize(function(){a.update()}),a})})});